{"version":3,"file":"frontegg-ng-core.js","sources":["../../src/lib/core.service.ts","../../src/lib/frontegg-base.component.ts","../../src/lib/frontegg-provider.component.ts","../../src/lib/components/page-header.component.ts","../../src/lib/core.module.ts","../../src/public-api.ts","../../src/frontegg-ng-core.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CoreService {\n\n  constructor() { }\n}\n","import { Component, ElementRef, OnDestroy } from '@angular/core';\nimport { DOMProxy } from '@frontegg/react-core';\n\n@Component({\n  template: `<ng-content></ng-content>`,\n})\nexport class FronteggBaseComponent implements OnDestroy {\n  protected rcParent: any;\n  protected rcPortal: any;\n  protected rcSetPortals: any;\n\n  constructor(protected elem: ElementRef) {\n    this.elem.nativeElement.ngClass = this;\n  }\n\n  protected mountElement<T = any>(component: any, otherProps?: T): void {\n    let parent = this.elem.nativeElement.parentElement;\n    while (parent != null && !parent.ngClass) {\n      parent = parent.parentElement;\n    }\n    const ngChildren = [...this.elem.nativeElement.childNodes];\n    const ngComponents = DOMProxy.createElement('div', {\n      ref: ref => ngChildren.forEach(node => ref?.appendChild(node as any)),\n    }, []);\n\n    this.rcPortal = DOMProxy.createPortal(DOMProxy.createElement(component, {\n      _resolvePortals: (setPortals) => this.rcSetPortals = setPortals,\n      ...otherProps,\n    } as any, ngComponents), this.elem.nativeElement);\n    if (!parent) {\n      const rcProxy = document.createElement('div');\n      document.body.appendChild(rcProxy);\n      DOMProxy.render(this.rcPortal, rcProxy);\n    } else {\n      this.rcParent = parent.ngClass;\n      this.rcParent.mountChild(this.rcPortal);\n    }\n  }\n\n\n  // noinspection JSUnusedGlobalSymbols\n  public mountChild(child): void {\n    this.rcSetPortals(portals => [...portals, child]);\n  }\n\n  // noinspection JSUnusedGlobalSymbols\n  public unmountChild(child): void {\n    this.rcSetPortals(portals => [...portals.filter(p => p !== child)]);\n  }\n\n  ngOnDestroy(): void {\n    // console.log('FronteggFirstComponent.ngOnDestroy');\n    // this.rcParent?.unmountChild(this.rcPortal);\n  }\n\n}\n","import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n} from '@angular/core';\nimport { NavigationEnd, Router } from '@angular/router';\nimport { FronteggBaseComponent } from './frontegg-base.component';\nimport { FronteggProvider } from '@frontegg/react-core';\nimport { AuthPlugin } from '@frontegg/react-auth';\nimport { uiLibrary } from '@frontegg/react-elements-semantic';\n\n// declare namespace JSX { interface ElementAttributesProperty {} }\n\n@Component({\n  selector: 'frontegg-provider',\n  template: `<ng-content></ng-content>`,\n  styles: [],\n})\nexport class FronteggProviderComponent extends FronteggBaseComponent implements AfterViewInit {\n  routeListeners: any[] = [];\n  // 1) createElement(RcComponent)\n  //   1.1) pass upper props to RcComponent\n  //   1.2) create smart children component with unique id to inject ng-content after mount\n  // 2) create React Portal to be rendered inside this.elementRef\n  // 3) search for parent Rc Component to inject this ReactPortal to it's children\n  // 4) after React.Portal did mount, inject ng-container to it's smart children component\n\n  constructor(elem: ElementRef, private router: Router) {\n    super(elem);\n  }\n\n  ngAfterViewInit(): void {\n    // @ts-ignore\n    const pl = this.router.location._platformLocation;\n    pl._history.listen = (e) => {\n      this.routeListeners.push(e);\n      return () => this.routeListeners = this.routeListeners.filter(l => l !== e);\n    };\n    pl._history.createHref = (e) => e.pathname;\n    pl._history.push = (path, data) => this.router.navigate([path], { state: data, replaceUrl: false });\n    pl._history.replace = (path, data) => this.router.navigate([path], { state: data, replaceUrl: true });\n    pl._history.location = pl.location;\n\n    this.router.events.subscribe((event) => {\n      if (event instanceof NavigationEnd) {\n        this.routeListeners.forEach(l => l(pl.location));\n      }\n    });\n\n    this.mountElement(FronteggProvider, {\n      _history: pl._history,\n      plugins: [AuthPlugin()],\n      uiLibrary,\n      debugMode: true,\n      context: {\n        baseUrl: `http://localhost:8080`,\n        requestCredentials: 'include',\n      },\n    });\n  }\n\n}\n","import { AfterViewInit, Component, ElementRef, Input } from '@angular/core';\nimport { FronteggBaseComponent } from '../frontegg-base.component';\nimport { PageHeader, PageHeaderProps } from '@frontegg/react-core';\n\n@Component({\n  selector: 'frontegg-page-header',\n  template: ``,\n})\nexport class PageHeaderComponent extends FronteggBaseComponent implements AfterViewInit {\n  @Input() className: string;\n  @Input() title: string;\n  @Input() titleClassName: string;\n  @Input() subTitle?: string;\n  @Input() childClassName?: string;\n  @Input() onBackButtonClick?: (e) => void;\n\n  constructor(protected elem: ElementRef) {\n    super(elem);\n  }\n\n  ngAfterViewInit(): void {\n    this.mountElement<PageHeaderProps>(PageHeader, {\n      className: this.className,\n      title: this.title,\n      titleClassName: this.titleClassName,\n      subTitle: this.subTitle,\n      childClassName: this.childClassName,\n      onBackButtonClick: this.onBackButtonClick,\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { FronteggProviderComponent } from './frontegg-provider.component';\nimport { PortalModule } from '@angular/cdk/portal';\nimport { PageHeaderComponent } from './components/page-header.component';\nimport { FronteggBaseComponent } from './frontegg-base.component';\n\n@NgModule({\n  declarations: [\n    FronteggProviderComponent,\n    PageHeaderComponent,\n  ],\n  imports: [\n    PortalModule,\n  ],\n  exports: [\n    FronteggProviderComponent,\n    PageHeaderComponent,\n  ],\n})\nexport class CoreModule {\n}\n","/*\n * Public API Surface of core\n */\n\n\nexport * from './lib/core.service';\nexport * from './lib/core.module';\nexport * from './lib/frontegg-provider.component';\nexport * from './lib/components/page-header.component';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i0.ɵɵprojection"],"mappings":"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"}